<table class="table table-lg" id="outage_{{index .Map "name"}}_{{index .Map "uuid"}}_id">
    <thead>
    <tr>
        <th>#</th>
        <th>Period</th>
        <th>Impact</th>
        <th>Status</th>
        <th>Start Time</th>
        <th>End Time</th>
        <th>Cost</th>
        <th class="text-center">Actions</th>
    </tr>
    </thead>
    <tbody>
    {{range $index, $element := index .Map "item"}}
    <tr>
        <td>{{$element.outage_number}}</td>
        <td>{{$element.month_year_group}}</td>
        <td>
            <h6 class="no-margin">
                <a href="#">{{$element.impact}}</a>
                <small class="display-block text-muted">{{$element.impact_info}}</small>
            </h6>
        </td>
        <td>
            <span class="label label-{{$element.status_status}}">{{$element.status}}</span>
        </td>
        <td>{{$element.time_start}}</td>
        <td>
            {{$element.time_end}} <small class="display-block text-muted text-size-small">{{$element.duration}}</small>
        </td>
        <td>
            <h6 class="no-margin text-bold">{{$element.cost}} <small class="display-block text-muted text-size-small">{{$element.cost_info}}</small></h6>
        </td>
        <td class="text-center">
            <ul class="icons-list">
                <li><a href="#" data-toggle="modal" data-target="#invoice"><i class="icon-file-eye"></i></a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-file-text2"></i> <span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-menu-right">
                        <li><a href="#"><i class="icon-file-download"></i> Download</a></li>
                        <li><a href="#"><i class="icon-printer"></i> Print</a></li>
                        <li class="divider"></li>
                        <li><a href="#"><i class="icon-file-plus"></i> Share</a></li>
                    </ul>
                </li>
            </ul>
        </td>
    </tr>
    {{end}}
    </tbody>
</table>
</div>
<!-- /invoice archive -->

<script>

    // Table setup
    // ------------------------------

    // Initialize
    $('#outage_{{index .Map "name"}}_{{index .Map "uuid"}}_id').DataTable({
        autoWidth: false,
        columnDefs: [
            {
                width: '30px',
                targets: 0
            },
            {
                visible: false,
                targets: 1
            },
            {
                orderable: false,
                width: '100px',
                targets: 7
            },
            {
                width: '15%',
                targets: [4, 5]
            },
            {
                width: '15%',
                targets: 6
            },
            {
                width: '15%',
                targets: 3
            }
        ],
        order: [[ 0, 'desc' ]],
        dom: '<"datatable-header"fl><"datatable-scroll-lg"t><"datatable-footer"ip>',
        language: {
            search: '<span>Filter:</span> _INPUT_',
            searchPlaceholder: 'Type to filter...',
            lengthMenu: '<span>Show:</span> _MENU_',
            paginate: { 'first': 'First', 'last': 'Last', 'next': '&rarr;', 'previous': '&larr;' }
        },
        lengthMenu: [ 25, 50, 75, 100 ],
        displayLength: 25,
        drawCallback: function ( settings ) {
            var api = this.api();
            var rows = api.rows( {page:'current'} ).nodes();
            var last=null;

            api.column(1, {page:'current'} ).data().each( function ( group, i ) {
                if ( last !== group ) {
                    $(rows).eq( i ).before(
                            '<tr class="active border-double"><td colspan="8" class="text-semibold">'+group+'</td></tr>'
                    );

                    last = group;
                }
            });

            $('.select').select2({
                width: '150px',
                minimumResultsForSearch: Infinity
            });

            $(this).find('tbody tr').slice(-3).find('.dropdown, .btn-group').addClass('dropup');
        },
        preDrawCallback: function(settings) {
            $(this).find('tbody tr').slice(-3).find('.dropdown, .btn-group').removeClass('dropup');
            $('.select').select2().select2('destroy');
        }
    });



    // External table additions
    // ------------------------------

    // Enable Select2 select for the length option
    $('.dataTables_length select').select2({
        minimumResultsForSearch: Infinity,
        width: 'auto'
    });
</script>